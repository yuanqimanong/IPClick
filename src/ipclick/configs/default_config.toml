# ================ SDK配置 [CLIENT] ================
# -------------- 基础配置 [GENERAL] --------------
[GENERAL]
# 程序运行模式: "standalone" (单机) | "cluster" (多机器/集群)
mode = "standalone"
# 调试模式 (开启后输出详细日志)
debug = false

# ------- 代理配置 [PROXY] -------
[PROXY]
scheme = 'http'
host = '127.0.0.1'
port = 7890
# 三方隧道代理
auth_key = ''
auth_password = ''
channel_name = ''
session_ttl = 60
country_code = ''
tunnel_server = ''

# ------- 集群配置 [CLUSTER] -------
[CLUSTER]
# 负载均衡策略 (round_robin/random/weight)
load_balancer = "round_robin"
nodes = [
    # 格式：[id, address, region(可选), zone(可选), weight(可选), tags(可选)]
    { id = "node-101", address = "192.168.1.101:8080", region = "us-east-1", zone = "1a", weight = 100 },
]
db_uri = "mysql://..."

# ================ 服务端配置 [SERVER] ================
[SERVER]
# 监听地址
host = "[::]"
# 监听端口
port = 9527
# 最大线程数
max_workers = 100

# ------- 下载器配置 [DOWNLOADER] -------
[DOWNLOADER]
# 连接超时（秒）
connect_timeout = 10
# 下载超时（秒）
download_timeout = 300
# 失败重试策略
[DOWNLOADER.retry]
max_attempts = 3                # 最大重试次数
backoff_exponent = 2.0          # 退避指数（等待时间 = base * (exponent^重试次数)）
initial_backoff = 1             # 初始等待时间（秒）
max_backoff = 60                # 最大等待时间（秒）
retry_codes = [500, 502, 503]   # 触发重试的状态码
# 并发控制
[DOWNLOADER.concurrency]
max_threads = 8                 # 最大下载线程数
per_host_connections = 2        # 单目标主机最大并发连接数
# 流量控制（KB/s）
[DOWNLOADER.rate_limit]
enabled = false
download_speed = 1024           # 下载限速值（0=不限速）
upload_speed = 512              # 上传限速值（P2P场景）
# 分块下载（大文件优化）
[DOWNLOADER.chunk]
enabled = true
chunk_size = 10                 # 分块大小（MB）
verify_checksum = true          # 下载完成后校验哈希
# 临时存储
[DOWNLOADER.storage]
temp_dir = "/tmp/downloads"     # 分块临时存储目录
auto_clean = true               # 下载完成后清除临时文件

# ------- 浏览器渲染配置 [BROWSER] -------
[BROWSER]
# 启用浏览器渲染引擎
enabled = true
# 无头模式 (无GUI界面)
headless = true
# 用户代理 (伪装浏览器标识)
user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36"
# 视窗尺寸
viewport = { width = 1920, height = 1080 }
# 插件配置
[BROWSER.plugins]
# 插件安装目录
install_dir = "/path/to/browser/plugins"
# 启用插件列表
enabled = [
    "adblock.crx",
    "web-assistant.zip"
]
# 禁用插件列表
disabled = ["flash_player.dll"]
# 代理网关 (覆盖系统代理)
[BROWSER.proxy]
gateway = "http://127.0.0.1:8080"  # 指向本地代理服务
bypass_list = ["*.internal.com"]    # 代理排除列表
# 渲染超时控制 (秒)
[BROWSER.timeout]
page_load = 30      # 页面加载超时
script_exec = 60    # JS执行超时
render = 20         # 渲染完成检测超时
# 缓存管理
[BROWSER.cache]
max_size = 500      # 缓存上限(MB)
persist = true      # 持久化缓存
path = "/data/browser_cache"
# 安全沙箱配置
[BROWSER.sandbox]
enable = true
level = "strict"    # strict/moderate/off



# ================ 监控配置 [MONITOR] ================
[MONITOR]
health_check = true

# ================ 日志配置 [LOG] ================
[LOG]
# 日志级别 (debug/info/warn/error)
level = "info"
# 日志格式
format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
# 日志输出位置 (stdout 或文件路径)
output = "stdout"
# 日志轮转配置 (当 output 为文件时生效)
[LOG.rotation]
max_size = 100   # 单文件最大(MB)
max_backups = 5  # 保留历史文件数

